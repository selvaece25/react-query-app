{"version":3,"file":"react-query.development.js","sources":["../src/utils.js","../src/config.js","../src/queryCache.js","../src/setFocusHandler.js","../src/useIsFetching.js","../src/useMutation.js","../src/useBaseQuery.js","../src/useQuery.js","../src/usePaginatedQuery.js","../src/useInfiniteQuery.js"],"sourcesContent":["import React from 'react'\n\n//\n\nexport const statusIdle = 'idle'\nexport const statusLoading = 'loading'\nexport const statusError = 'error'\nexport const statusSuccess = 'success'\n\nlet _uid = 0\nexport const uid = () => _uid++\nexport const cancelledError = {}\nexport let globalStateListeners = []\nexport const isServer = typeof window === 'undefined'\nexport const noop = () => {}\nexport const identity = d => d\nexport let Console = console || { error: noop, warn: noop, log: noop }\n\nexport function useUid() {\n  const ref = React.useRef(null)\n\n  if (ref.current === null) {\n    ref.current = uid()\n  }\n\n  return ref.current\n}\n\nexport function setConsole(c) {\n  Console = c\n}\n\nexport function useGetLatest(obj) {\n  const ref = React.useRef()\n  ref.current = obj\n\n  return React.useCallback(() => ref.current, [])\n}\n\nexport function functionalUpdate(updater, old) {\n  return typeof updater === 'function' ? updater(old) : updater\n}\n\nexport function stableStringifyReplacer(_, value) {\n  return isObject(value)\n    ? Object.assign(\n        {},\n        ...Object.keys(value)\n          .sort()\n          .map(key => ({\n            [key]: value[key],\n          }))\n      )\n    : value\n}\n\nexport function stableStringify(obj) {\n  return JSON.stringify(obj, stableStringifyReplacer)\n}\n\nexport function isObject(a) {\n  return a && typeof a === 'object' && !Array.isArray(a)\n}\n\nexport function deepIncludes(a, b) {\n  if (typeof a !== typeof b) {\n    return false\n  }\n\n  if (typeof a === 'object') {\n    return !Object.keys(b).some(key => !deepIncludes(a[key], b[key]))\n  }\n\n  return a === b\n}\n\nexport function isDocumentVisible() {\n  return (\n    typeof document === 'undefined' ||\n    document.visibilityState === undefined ||\n    document.visibilityState === 'visible' ||\n    document.visibilityState === 'prerender'\n  )\n}\n\nexport function isOnline() {\n  return navigator.onLine === undefined || navigator.onLine\n}\n\nexport function getQueryArgs(args) {\n  if (isObject(args[0])) {\n    if (\n      args[0].hasOwnProperty('queryKey') &&\n      args[0].hasOwnProperty('queryFn')\n    ) {\n      const { queryKey, variables = [], queryFn, config = {} } = args[0]\n      return [queryKey, variables, queryFn, config]\n    } else {\n      throw new Error('queryKey and queryFn keys are required.')\n    }\n  }\n  if (typeof args[2] === 'function') {\n    const [queryKey, variables = [], queryFn, config = {}] = args\n    return [queryKey, variables, queryFn, config]\n  }\n\n  const [queryKey, queryFn, config = {}] = args\n\n  return [queryKey, [], queryFn, config]\n}\n\nexport function useMountedCallback(callback) {\n  const mounted = React.useRef(false)\n  React[isServer ? 'useEffect' : 'useLayoutEffect'](() => {\n    mounted.current = true\n    return () => (mounted.current = false)\n  }, [])\n  return React.useCallback(\n    (...args) => (mounted.current ? callback(...args) : void 0),\n    [callback]\n  )\n}\n\nexport function handleSuspense(query) {\n  if (query.config.suspense || query.config.useErrorBoundary) {\n    if (query.status === statusError) {\n      throw query.error\n    }\n  }\n\n  if (query.config.suspense) {\n    if (query.status === statusLoading) {\n      query.wasSuspensed = true\n      throw query.refetch()\n    }\n  }\n}\n","import React from 'react'\nimport { noop, stableStringify, identity } from './utils'\n\nexport const configContext = React.createContext()\n\nexport const defaultConfigRef = {\n  current: {\n    retry: 3,\n    retryDelay: attemptIndex => Math.min(1000 * 2 ** attemptIndex, 30000),\n    staleTime: 0,\n    cacheTime: 5 * 60 * 1000,\n    refetchAllOnWindowFocus: true,\n    refetchInterval: false,\n    suspense: false,\n    queryKeySerializerFn: defaultQueryKeySerializerFn,\n    queryFnParamsFilter: identity,\n    throwOnError: false,\n    useErrorBoundary: undefined, // this will default to the suspense value\n    onMutate: noop,\n    onSuccess: noop,\n    onError: noop,\n    onSettled: noop,\n    refetchOnMount: true,\n  },\n}\n\nexport function useConfigContext() {\n  return React.useContext(configContext) || defaultConfigRef.current\n}\n\nexport function ReactQueryConfigProvider({ config, children }) {\n  let configContextValue = React.useContext(configContext)\n\n  const newConfig = React.useMemo(() => {\n    const newConfig = {\n      ...(configContextValue || defaultConfigRef.current),\n      ...config,\n    }\n\n    // Default useErrorBoundary to the suspense value\n    if (typeof newConfig.useErrorBoundary === 'undefined') {\n      newConfig.useErrorBoundary = newConfig.suspense\n    }\n\n    return newConfig\n  }, [config, configContextValue])\n\n  if (!configContextValue) {\n    defaultConfigRef.current = newConfig\n  }\n\n  return (\n    <configContext.Provider value={newConfig}>\n      {children}\n    </configContext.Provider>\n  )\n}\n\nexport function defaultQueryKeySerializerFn(queryKey) {\n  if (!queryKey) {\n    return []\n  }\n\n  if (typeof queryKey === 'function') {\n    try {\n      return defaultQueryKeySerializerFn(queryKey())\n    } catch {\n      return []\n    }\n  }\n\n  if (typeof queryKey === 'string') {\n    queryKey = [queryKey]\n  }\n\n  const queryHash = stableStringify(queryKey)\n  queryKey = JSON.parse(queryHash)\n\n  return [queryHash, queryKey]\n}\n","import {\n  isServer,\n  functionalUpdate,\n  cancelledError,\n  isDocumentVisible,\n  statusLoading,\n  statusSuccess,\n  statusError,\n  getQueryArgs,\n  deepIncludes,\n  noop,\n} from './utils'\nimport { defaultConfigRef } from './config'\n\nexport const queryCache = makeQueryCache()\n\nconst actionInit = {}\nconst actionFailed = {}\nconst actionMarkStale = {}\nconst actionMarkGC = {}\nconst actionFetch = {}\nconst actionSuccess = {}\nconst actionError = {}\n\nexport function makeQueryCache() {\n  const listeners = []\n\n  const cache = {\n    queries: {},\n    isFetching: 0,\n  }\n\n  const notifyGlobalListeners = () => {\n    cache.isFetching = Object.values(queryCache.queries).reduce(\n      (acc, query) => (query.state.isFetching ? acc + 1 : acc),\n      0\n    )\n    listeners.forEach(d => d(cache))\n  }\n\n  cache.subscribe = cb => {\n    listeners.push(cb)\n    return () => {\n      listeners.splice(listeners.indexOf(cb), 1)\n    }\n  }\n\n  cache.clear = () => {\n    cache.queries = {}\n    notifyGlobalListeners()\n  }\n\n  const findQueries = (predicate, { exact } = {}) => {\n    if (typeof predicate !== 'function') {\n      const [\n        queryHash,\n        queryKey,\n      ] = defaultConfigRef.current.queryKeySerializerFn(predicate)\n      predicate = d =>\n        exact ? d.queryHash === queryHash : deepIncludes(d.queryKey, queryKey)\n    }\n\n    return Object.values(cache.queries).filter(predicate)\n  }\n\n  cache.getQueries = findQueries\n\n  cache.getQuery = queryKey => findQueries(queryKey, { exact: true })[0]\n\n  cache.getQueryData = queryKey => cache.getQuery(queryKey)?.state.data\n\n  cache.removeQueries = (predicate, { exact } = {}) => {\n    const foundQueries = findQueries(predicate, { exact })\n\n    foundQueries.forEach(query => {\n      clearTimeout(query.staleTimeout)\n      delete cache.queries[query.queryHash]\n    })\n\n    if (foundQueries.length) {\n      notifyGlobalListeners()\n    }\n  }\n\n  cache.refetchQueries = async (\n    predicate,\n    { exact, throwOnError, force } = {}\n  ) => {\n    const foundQueries =\n      predicate === true\n        ? Object.values(cache.queries)\n        : findQueries(predicate, { exact })\n\n    try {\n      return await Promise.all(\n        foundQueries.map(query => query.fetch({ force }))\n      )\n    } catch (err) {\n      if (throwOnError) {\n        throw err\n      }\n    }\n  }\n\n  cache._buildQuery = (userQueryKey, queryVariables, queryFn, config) => {\n    let [queryHash, queryKey] = config.queryKeySerializerFn(userQueryKey)\n\n    let query = cache.queries[queryHash]\n\n    if (query) {\n      Object.assign(query, { queryVariables, queryFn })\n      Object.assign(query.config, config)\n    } else {\n      query = makeQuery({\n        queryKey,\n        queryHash,\n        queryVariables,\n        queryFn,\n        config,\n      })\n\n      // If the query started with data, schedule\n      // a stale timeout\n      if (query.state.data) {\n        query.scheduleStaleTimeout()\n\n        // Simulate a query healing process\n        query.heal()\n        // Schedule for garbage collection in case\n        // nothing subscribes to this query\n        query.scheduleGarbageCollection()\n      }\n\n      if (query.queryHash) {\n        if (!isServer) {\n          cache.queries[queryHash] = query\n          // Here, we setTimeout so as to not trigger\n          // any setState's in parent components in the\n          // middle of the render phase.\n          setTimeout(() => {\n            notifyGlobalListeners()\n          })\n        }\n      }\n    }\n\n    return query\n  }\n\n  cache.prefetchQuery = async (...args) => {\n    let [\n      queryKey,\n      queryVariables,\n      queryFn,\n      { force, ...config },\n    ] = getQueryArgs(args)\n\n    config = {\n      ...defaultConfigRef.current,\n      ...config,\n    }\n\n    const query = cache._buildQuery(queryKey, queryVariables, queryFn, config)\n\n    // Don't prefetch queries that are fresh, unless force is passed\n    if (query.state.isStale || force) {\n      // Trigger a fetch and return the promise\n      try {\n        const res = await query.fetch({ force })\n        query.wasPrefetched = true\n        return res\n      } catch (err) {\n        if (config.throwOnError) {\n          throw err\n        }\n      }\n    }\n\n    return query.state.data\n  }\n\n  cache.setQueryData = (queryKey, updater, { exact, ...config } = {}) => {\n    let queries = findQueries(queryKey, { exact })\n\n    if (!queries.length && typeof queryKey !== 'function') {\n      queries = [\n        cache._buildQuery(queryKey, undefined, () => new Promise(noop), {\n          ...defaultConfigRef.current,\n          ...config,\n        }),\n      ]\n    }\n\n    queries.forEach(d => d.setData(updater))\n  }\n\n  function makeQuery(options) {\n    const reducer = options.config.queryReducer || defaultQueryReducer\n\n    const noQueryHash = typeof options.queryHash === 'undefined'\n\n    const initialData =\n      typeof options.config.initialData === 'function'\n        ? options.config.initialData()\n        : options.config.initialData\n\n    const hasInitialData = typeof initialData !== 'undefined'\n\n    const isStale = noQueryHash ? true : !hasInitialData\n\n    const manual = options.config.manual\n\n    const initialStatus =\n      noQueryHash || manual || hasInitialData ? statusSuccess : statusLoading\n\n    const query = {\n      ...options,\n      instances: [],\n      state: reducer(undefined, {\n        type: actionInit,\n        initialStatus,\n        initialData,\n        hasInitialData,\n        isStale,\n        manual,\n      }),\n    }\n\n    const dispatch = action => {\n      query.state = reducer(query.state, action)\n      query.instances.forEach(d => d.onStateUpdate(query.state))\n      notifyGlobalListeners()\n    }\n\n    query.scheduleStaleTimeout = () => {\n      if (query.config.staleTime === Infinity) {\n        return\n      }\n      query.staleTimeout = setTimeout(() => {\n        if (queryCache.getQuery(query.queryKey)) {\n          dispatch({ type: actionMarkStale })\n        }\n      }, query.config.staleTime)\n    }\n\n    query.scheduleGarbageCollection = () => {\n      dispatch({ type: actionMarkGC })\n      query.cacheTimeout = setTimeout(\n        () => {\n          cache.removeQueries(\n            d =>\n              d.state.markedForGarbageCollection &&\n              d.queryHash === query.queryHash\n          )\n        },\n        typeof query.state.data === 'undefined' &&\n          query.state.status !== 'error'\n          ? 0\n          : query.config.cacheTime\n      )\n    }\n\n    query.heal = () => {\n      // Stop the query from being garbage collected\n      clearTimeout(query.cacheTimeout)\n\n      // Mark the query as not cancelled\n      query.cancelled = null\n    }\n\n    query.subscribe = instance => {\n      let found = query.instances.find(d => d.id === instance.id)\n\n      if (found) {\n        Object.assign(found, instance)\n      } else {\n        found = {\n          onStateUpdate: noop,\n          ...instance,\n        }\n        query.instances.push(instance)\n      }\n\n      query.heal()\n\n      // Return the unsubscribe function\n      return () => {\n        query.instances = query.instances.filter(d => d.id !== instance.id)\n\n        if (!query.instances.length) {\n          // Cancel any side-effects\n          query.cancelled = cancelledError\n\n          if (query.cancelQueries) {\n            query.cancelQueries()\n          }\n\n          // Schedule garbage collection\n          query.scheduleGarbageCollection()\n        }\n      }\n    }\n\n    // Set up the fetch function\n    const tryFetchData = async (queryFn, ...args) => {\n      try {\n        // Perform the query\n        const promise = queryFn(...query.config.queryFnParamsFilter(args))\n\n        query.cancelQueries = () => promise.cancel?.()\n\n        const data = await promise\n\n        delete query.cancelQueries\n        if (query.cancelled) throw query.cancelled\n\n        return data\n      } catch (error) {\n        delete query.cancelQueries\n        if (query.cancelled) throw query.cancelled\n\n        // If we fail, increase the failureCount\n        dispatch({ type: actionFailed })\n\n        // Do we need to retry the request?\n        if (\n          query.config.retry === true ||\n          query.state.failureCount <= query.config.retry ||\n          (typeof query.config.retry === 'function' &&\n            query.config.retry(query.state.failureCount, error))\n        ) {\n          // Only retry if the document is visible\n          if (!isDocumentVisible()) {\n            // set this flag to continue fetch retries on focus\n            query.shouldContinueRetryOnFocus = true\n            return new Promise(noop)\n          }\n\n          delete query.shouldContinueRetryOnFocus\n\n          // Determine the retryDelay\n          const delay = functionalUpdate(\n            query.config.retryDelay,\n            query.state.failureCount\n          )\n\n          // Return a new promise with the retry\n          return await new Promise((resolve, reject) => {\n            // Keep track of the retry timeout\n            setTimeout(async () => {\n              if (query.cancelled) return reject(query.cancelled)\n\n              try {\n                const data = await tryFetchData(queryFn, ...args)\n                if (query.cancelled) return reject(query.cancelled)\n                resolve(data)\n              } catch (error) {\n                if (query.cancelled) return reject(query.cancelled)\n                reject(error)\n              }\n            }, delay)\n          })\n        }\n\n        throw error\n      }\n    }\n\n    query.fetch = async ({ force, __queryFn = query.queryFn } = {}) => {\n      // Don't refetch fresh queries that don't have a queryHash\n\n      if (!query.queryHash || (!query.state.isStale && !force)) {\n        return\n      }\n\n      // Create a new promise for the query cache if necessary\n      if (!query.promise) {\n        query.promise = (async () => {\n          // If there are any retries pending for this query, kill them\n          query.cancelled = null\n\n          try {\n            // Set up the query refreshing state\n            dispatch({ type: actionFetch })\n\n            // Try to fetch\n            let data = await tryFetchData(\n              __queryFn,\n              ...query.queryKey,\n              ...query.queryVariables\n            )\n\n            query.setData(data)\n\n            query.instances.forEach(\n              instance =>\n                instance.onSuccess && instance.onSuccess(query.state.data)\n            )\n\n            query.instances.forEach(\n              instance =>\n                instance.onSettled && instance.onSettled(query.state.data, null)\n            )\n\n            delete query.promise\n\n            return data\n          } catch (error) {\n            dispatch({\n              type: actionError,\n              cancelled: error === query.cancelled,\n              error,\n            })\n\n            delete query.promise\n\n            if (error !== query.cancelled) {\n              query.instances.forEach(\n                instance => instance.onError && instance.onError(error)\n              )\n\n              query.instances.forEach(\n                instance =>\n                  instance.onSettled && instance.onSettled(undefined, error)\n              )\n\n              throw error\n            }\n          }\n        })()\n      }\n\n      return query.promise\n    }\n\n    query.setData = updater => {\n      // Set data and mark it as cached\n      dispatch({ type: actionSuccess, updater })\n\n      // Schedule a fresh invalidation!\n      clearTimeout(query.staleTimeout)\n      query.scheduleStaleTimeout()\n    }\n\n    return query\n  }\n\n  return cache\n}\n\nexport function defaultQueryReducer(state, action) {\n  switch (action.type) {\n    case actionInit:\n      return {\n        status: action.initialStatus,\n        error: null,\n        isFetching: action.hasInitialData ? false : !action.manual,\n        canFetchMore: false,\n        failureCount: 0,\n        isStale: action.isStale,\n        markedForGarbageCollection: false,\n        data: action.initialData,\n        updatedAt: action.hasInitialData ? Date.now() : 0,\n      }\n    case actionFailed:\n      return {\n        ...state,\n        failureCount: state.failureCount + 1,\n      }\n    case actionMarkStale:\n      return {\n        ...state,\n        isStale: true,\n      }\n    case actionMarkGC: {\n      return {\n        ...state,\n        markedForGarbageCollection: true,\n      }\n    }\n    case actionFetch:\n      return {\n        ...state,\n        status: state.status === statusError ? statusLoading : state.status,\n        isFetching: true,\n        failureCount: 0,\n      }\n    case actionSuccess:\n      return {\n        ...state,\n        status: statusSuccess,\n        data: functionalUpdate(action.updater, state.data),\n        error: null,\n        isStale: false,\n        isFetching: false,\n        canFetchMore: action.canFetchMore,\n        updatedAt: Date.now(),\n        failureCount: 0,\n      }\n    case actionError:\n      return {\n        ...state,\n        isFetching: false,\n        isStale: true,\n        ...(!action.cancelled && {\n          status: statusError,\n          error: action.error,\n        }),\n      }\n    default:\n      throw new Error()\n  }\n}\n","import { isOnline, isDocumentVisible, Console, isServer } from './utils'\nimport { defaultConfigRef } from './config'\nimport { queryCache } from './queryCache'\n\nconst visibilityChangeEvent = 'visibilitychange'\nconst focusEvent = 'focus'\n\nconst onWindowFocus = () => {\n  const { refetchAllOnWindowFocus } = defaultConfigRef.current\n\n  if (isDocumentVisible() && isOnline()) {\n    queryCache\n      .refetchQueries(query => {\n        if (!query.instances.length) {\n          return false\n        }\n\n        if (query.config.manual === true) {\n          return false\n        }\n\n        if (query.shouldContinueRetryOnFocus) {\n          // delete promise, so `fetch` will create new one\n          delete query.promise\n          return true\n        }\n\n        if (typeof query.config.refetchOnWindowFocus === 'undefined') {\n          return refetchAllOnWindowFocus\n        } else {\n          return query.config.refetchOnWindowFocus\n        }\n      })\n      .catch(Console.error)\n  }\n}\n\nlet removePreviousHandler\n\nexport function setFocusHandler(callback) {\n  // Unsub the old watcher\n  if (removePreviousHandler) {\n    removePreviousHandler()\n  }\n  // Sub the new watcher\n  removePreviousHandler = callback(onWindowFocus)\n}\n\nsetFocusHandler(handleFocus => {\n  // Listen to visibillitychange and focus\n  if (!isServer && window?.addEventListener) {\n    window.addEventListener(visibilityChangeEvent, handleFocus, false)\n    window.addEventListener(focusEvent, handleFocus, false)\n\n    return () => {\n      // Be sure to unsubscribe if a new handler is set\n      window.removeEventListener(visibilityChangeEvent, handleFocus)\n      window.removeEventListener(focusEvent, handleFocus)\n    }\n  }\n})\n","import React from 'react'\n\nimport { queryCache } from './queryCache'\n\nexport function useIsFetching() {\n  const [state, setState] = React.useState({})\n\n  React.useEffect(() => {\n    return queryCache.subscribe(() => setState({}))\n  }, [])\n\n  return React.useMemo(() => state && queryCache.isFetching, [state])\n}\n","import React from 'react'\n\n//\n\nimport { useConfigContext } from './config'\nimport {\n  statusIdle,\n  statusLoading,\n  statusSuccess,\n  statusError,\n  useGetLatest,\n  Console,\n  uid,\n  useMountedCallback,\n  noop,\n} from './utils'\n\nconst getDefaultState = () => ({\n  status: statusIdle,\n  data: undefined,\n  error: null,\n})\n\nconst actionReset = {}\nconst actionLoading = {}\nconst actionResolve = {}\nconst actionReject = {}\n\nfunction mutationReducer(state, action) {\n  if (action.type === actionReset) {\n    return getDefaultState()\n  }\n  if (action.type === actionLoading) {\n    return {\n      status: statusLoading,\n    }\n  }\n  if (action.type === actionResolve) {\n    return {\n      status: statusSuccess,\n      data: action.data,\n    }\n  }\n  if (action.type === actionReject) {\n    return {\n      status: statusError,\n      error: action.error,\n    }\n  }\n  throw new Error()\n}\n\nexport function useMutation(mutationFn, config = {}) {\n  const [state, unsafeDispatch] = React.useReducer(\n    mutationReducer,\n    null,\n    getDefaultState\n  )\n\n  const dispatch = useMountedCallback(unsafeDispatch)\n\n  const getMutationFn = useGetLatest(mutationFn)\n\n  const getConfig = useGetLatest({\n    ...useConfigContext(),\n    ...config,\n  })\n\n  const latestMutationRef = React.useRef()\n\n  const mutate = React.useCallback(\n    async (\n      variables,\n      { onSuccess = noop, onError = noop, onSettled = noop, throwOnError } = {}\n    ) => {\n      const config = getConfig()\n\n      const mutationId = uid()\n      latestMutationRef.current = mutationId\n\n      const isLatest = async () => latestMutationRef.current === mutationId\n\n      dispatch({ type: actionLoading })\n\n      let snapshotValue\n\n      try {\n        snapshotValue = await config.onMutate(variables)\n\n        let data\n\n        if (isLatest()) {\n          data = await getMutationFn()(variables)\n        }\n\n        if (isLatest()) {\n          await onSuccess(data, variables)\n        }\n\n        if (isLatest()) {\n          await config.onSuccess(data, variables)\n        }\n\n        if (isLatest()) {\n          await onSettled(data, null, variables)\n        }\n\n        if (isLatest()) {\n          await config.onSettled(data, null, variables)\n        }\n\n        if (isLatest()) {\n          dispatch({ type: actionResolve, data })\n        }\n\n        return data\n      } catch (error) {\n        if (isLatest()) {\n          Console.error(error)\n          await onError(error, variables, snapshotValue)\n        }\n\n        if (isLatest()) {\n          await config.onError(error, variables, snapshotValue)\n        }\n\n        if (isLatest()) {\n          await onSettled(undefined, error, variables, snapshotValue)\n        }\n\n        if (isLatest()) {\n          await config.onSettled(undefined, error, variables, snapshotValue)\n        }\n\n        if (isLatest()) {\n          dispatch({ type: actionReject, error })\n\n          if (throwOnError ?? config.throwOnError) {\n            throw error\n          }\n        }\n      }\n    },\n    [dispatch, getConfig, getMutationFn]\n  )\n\n  const reset = React.useCallback(() => dispatch({ type: actionReset }), [\n    dispatch,\n  ])\n\n  React.useEffect(() => {\n    if (getConfig().useErrorBoundary && state.error) {\n      throw state.error\n    }\n  }, [getConfig, state.error])\n\n  return [mutate, { ...state, reset }]\n}\n","import React from 'react'\n\n//\n\nimport { queryCache } from './queryCache'\nimport { useConfigContext } from './config'\nimport {\n  useUid,\n  isDocumentVisible,\n  Console,\n  useGetLatest,\n  useMountedCallback,\n} from './utils'\n\nexport function useBaseQuery(queryKey, queryVariables, queryFn, config = {}) {\n  const instanceId = useUid()\n\n  config = {\n    ...useConfigContext(),\n    ...config,\n  }\n\n  const queryRef = React.useRef()\n\n  const newQuery = queryCache._buildQuery(\n    queryKey,\n    queryVariables,\n    queryFn,\n    config\n  )\n\n  const useCachedQuery =\n    queryRef.current &&\n    typeof queryRef.current.queryHash === 'undefined' &&\n    typeof newQuery.queryHash === 'undefined'\n\n  // Do not use new query with undefined queryHash, if previous query also had undefined queryHash.\n  // Otherwise this will cause infinite loop.\n  if (!useCachedQuery) {\n    queryRef.current = newQuery\n  }\n\n  const query = queryRef.current\n\n  const [, unsafeRerender] = React.useState()\n\n  const rerender = useMountedCallback(unsafeRerender)\n\n  const getLatestConfig = useGetLatest(config)\n  const refetch = React.useCallback(\n    async ({ throwOnError, ...rest } = {}) => {\n      try {\n        return await query.fetch(rest)\n      } catch (err) {\n        if (throwOnError) {\n          throw err\n        }\n      }\n    },\n    [query]\n  )\n\n  // Subscribe to the query and maybe trigger fetch\n  React.useEffect(() => {\n    const unsubscribeFromQuery = query.subscribe({\n      id: instanceId,\n      onStateUpdate: () => rerender({}),\n      onSuccess: data => getLatestConfig().onSuccess(data),\n      onError: err => getLatestConfig().onError(err),\n      onSettled: (data, err) => getLatestConfig().onSettled(data, err),\n    })\n\n    // Perform the initial fetch for this query if necessary\n    if (\n      !getLatestConfig().manual && // Don't auto fetch if config is set to manual query\n      !query.wasPrefetched && // Don't double fetch for prefetched queries\n      !query.wasSuspensed && // Don't double fetch for suspense\n      query.state.isStale && // Only refetch if stale\n      (getLatestConfig().refetchOnMount || query.instances.length === 1)\n    ) {\n      refetch().catch(Console.error)\n    }\n\n    query.wasPrefetched = false\n    query.wasSuspensed = false\n\n    return unsubscribeFromQuery\n  }, [getLatestConfig, instanceId, query, refetch, rerender])\n\n  // Handle refetch interval\n  React.useEffect(() => {\n    if (\n      config.refetchInterval &&\n      (!query.refetchInterval || config.refetchInterval < query.refetchInterval)\n    ) {\n      clearInterval(query.refetchInterval)\n      query.refetchInterval = setInterval(() => {\n        if (isDocumentVisible() || config.refetchIntervalInBackground) {\n          refetch().catch(Console.error)\n        }\n      }, config.refetchInterval)\n\n      return () => {\n        clearInterval(query.refetchInterval)\n        delete query.refetchInterval\n      }\n    }\n  }, [\n    config.refetchInterval,\n    config.refetchIntervalInBackground,\n    query.refetchInterval,\n    refetch,\n  ])\n\n  return {\n    ...query.state,\n    config,\n    query,\n    refetch,\n  }\n}\n","import { useBaseQuery } from './useBaseQuery'\nimport { getQueryArgs, handleSuspense } from './utils'\n\nexport function useQuery(...args) {\n  const query = useBaseQuery(...getQueryArgs(args))\n\n  handleSuspense(query)\n\n  return query\n}\n","import React from 'react'\n\n//\n\nimport { useBaseQuery } from './useBaseQuery'\nimport { getQueryArgs, handleSuspense } from './utils'\n\nexport function usePaginatedQuery(...args) {\n  let [queryKey, queryVariables, queryFn, config = {}] = getQueryArgs(args)\n\n  const lastDataRef = React.useRef()\n\n  // If latestData is set, don't use initialData\n  if (typeof lastDataRef.current !== 'undefined') {\n    delete config.initialData\n  }\n\n  const query = useBaseQuery(queryKey, queryVariables, queryFn, config)\n\n  let { data: latestData, status } = query\n\n  React.useEffect(() => {\n    if (status === 'success' && typeof latestData !== 'undefined') {\n      lastDataRef.current = latestData\n    }\n  }, [latestData, status])\n\n  let resolvedData = latestData\n\n  if (typeof resolvedData === 'undefined') {\n    resolvedData = lastDataRef.current\n  }\n\n  if (typeof resolvedData !== 'undefined') {\n    status = 'success'\n  }\n\n  handleSuspense(query)\n\n  return {\n    ...query,\n    resolvedData,\n    latestData,\n    status,\n  }\n}\n","import React from 'react'\n\n//\n\nimport { useBaseQuery } from './useBaseQuery'\nimport { getQueryArgs, useGetLatest, handleSuspense } from './utils'\n\nexport function useInfiniteQuery(...args) {\n  const queryInfoRef = React.useRef()\n  let [queryKey, queryVariables, queryFn, config = {}] = getQueryArgs(args)\n\n  const { getFetchMore } = config\n  const getGetFetchMore = useGetLatest(getFetchMore)\n\n  // The default queryFn will query all pages and map them together\n  const originalQueryFn = queryFn\n\n  queryFn = async () => {\n    const data = await Promise.all(\n      queryInfoRef.current.query.pageVariables.map(args =>\n        originalQueryFn(...args)\n      )\n    )\n    queryInfoRef.current.query.canFetchMore = getGetFetchMore()(\n      data[data.length - 1],\n      data\n    )\n    return data\n  }\n\n  const queryInfo = useBaseQuery(queryKey, queryVariables, queryFn, config)\n\n  if (\n    typeof queryInfo.query.canFetchMore === 'undefined' &&\n    typeof queryInfo.data !== 'undefined'\n  ) {\n    queryInfo.query.canFetchMore = getGetFetchMore()(\n      queryInfo.data[queryInfo.data.length - 1],\n      queryInfo.data\n    )\n  }\n\n  queryInfoRef.current = queryInfo\n\n  let {\n    refetch,\n    data = [],\n    query: { canFetchMore },\n  } = queryInfo\n\n  // Here we seed the pageVariabes for the query\n  if (!queryInfo.query.pageVariables) {\n    queryInfo.query.pageVariables = [\n      [...queryInfo.query.queryKey, ...queryInfo.query.queryVariables],\n    ]\n  }\n\n  const fetchMore = React.useCallback(\n    (fetchMoreInfo = queryInfoRef.current.query.canFetchMore) =>\n      queryInfoRef.current.query.canFetchMore\n        ? refetch({\n            force: true,\n            __queryFn: async (...args) => {\n              try {\n                queryInfoRef.current.query.isFetchingMore = true\n                const newArgs = [...args, fetchMoreInfo]\n                queryInfoRef.current.query.pageVariables.push(newArgs)\n                const data = [\n                  ...queryInfoRef.current.data,\n                  await originalQueryFn(...newArgs),\n                ]\n                queryInfoRef.current.query.canFetchMore = getGetFetchMore()(\n                  data[data.length - 1],\n                  data\n                )\n                return data\n              } finally {\n                queryInfoRef.current.query.isFetchingMore = false\n              }\n            },\n          })\n        : void 0,\n    [getGetFetchMore, originalQueryFn, refetch]\n  )\n\n  const isFetchingMore = React.useMemo(() => {\n    return !!queryInfo.query.isFetchingMore\n  }, [queryInfo.query.isFetchingMore])\n\n  handleSuspense(queryInfo)\n\n  return {\n    ...queryInfo,\n    data,\n    canFetchMore,\n    fetchMore,\n    isFetchingMore,\n  }\n}\n"],"names":["statusIdle","statusLoading","statusError","statusSuccess","_uid","uid","cancelledError","isServer","window","noop","identity","d","Console","console","error","warn","log","useUid","ref","React","useRef","current","setConsole","c","useGetLatest","obj","useCallback","functionalUpdate","updater","old","stableStringifyReplacer","_","value","isObject","Object","assign","keys","sort","map","key","stableStringify","JSON","stringify","a","Array","isArray","deepIncludes","b","some","isDocumentVisible","document","visibilityState","undefined","isOnline","navigator","onLine","getQueryArgs","args","hasOwnProperty","queryKey","variables","queryFn","config","Error","useMountedCallback","callback","mounted","handleSuspense","query","suspense","useErrorBoundary","status","wasSuspensed","refetch","configContext","createContext","defaultConfigRef","retry","retryDelay","attemptIndex","Math","min","staleTime","cacheTime","refetchAllOnWindowFocus","refetchInterval","queryKeySerializerFn","defaultQueryKeySerializerFn","queryFnParamsFilter","throwOnError","onMutate","onSuccess","onError","onSettled","refetchOnMount","useConfigContext","useContext","ReactQueryConfigProvider","children","configContextValue","newConfig","useMemo","queryHash","parse","then","direct","Promise","resolve","body","recover","result","e","f","i","arguments","length","apply","reject","queryCache","makeQueryCache","actionInit","actionFailed","actionMarkStale","actionMarkGC","actionFetch","actionSuccess","actionError","listeners","cache","queries","isFetching","notifyGlobalListeners","values","reduce","acc","state","forEach","subscribe","cb","push","splice","indexOf","clear","findQueries","predicate","exact","filter","getQueries","getQuery","getQueryData","data","removeQueries","foundQueries","clearTimeout","staleTimeout","refetchQueries","force","all","fetch","err","_buildQuery","userQueryKey","queryVariables","makeQuery","scheduleStaleTimeout","heal","scheduleGarbageCollection","setTimeout","prefetchQuery","isStale","res","wasPrefetched","setQueryData","setData","options","reducer","queryReducer","defaultQueryReducer","noQueryHash","initialData","hasInitialData","manual","initialStatus","instances","type","dispatch","action","onStateUpdate","Infinity","cacheTimeout","markedForGarbageCollection","cancelled","instance","found","find","id","cancelQueries","tryFetchData","promise","cancel","failureCount","shouldContinueRetryOnFocus","delay","__queryFn","canFetchMore","updatedAt","Date","now","visibilityChangeEvent","focusEvent","onWindowFocus","refetchOnWindowFocus","catch","removePreviousHandler","setFocusHandler","handleFocus","addEventListener","removeEventListener","useIsFetching","useState","setState","useEffect","_await","getDefaultState","_empty","actionReset","_awaitIgnored","actionLoading","_invoke","actionResolve","_catch","actionReject","mutationReducer","useMutation","mutationFn","useReducer","unsafeDispatch","getMutationFn","getConfig","latestMutationRef","mutate","mutationId","isLatest","snapshotValue","reset","useBaseQuery","instanceId","queryRef","newQuery","useCachedQuery","unsafeRerender","rerender","getLatestConfig","rest","unsubscribeFromQuery","clearInterval","setInterval","refetchIntervalInBackground","useQuery","usePaginatedQuery","lastDataRef","latestData","resolvedData","thrown","finalizer","bind","useInfiniteQuery","queryInfoRef","getFetchMore","getGetFetchMore","originalQueryFn","pageVariables","queryInfo","fetchMore","fetchMoreInfo","isFetchingMore","newArgs"],"mappings":"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"}