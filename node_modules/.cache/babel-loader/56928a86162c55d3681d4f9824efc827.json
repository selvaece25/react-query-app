{"ast":null,"code":"import _objectSpread from \"/Users/selvakumar/Documents/personal.nosync/coding/react-query-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _window$__REDUX_DEVTO, _window;\n\nimport { createStore } from 'redux';\nexport var ACTIONS = {\n  CHANGE_DIET: 'CHANGE_DIET',\n  LOAD_MENU: 'LOAD_MENU',\n  ADD_TO_CART: 'ADD_TO_CART',\n  REMOVE_FROM_CART: 'REMOVE_FROM_CART'\n};\nvar initialState = {\n  diet: 'all',\n  menuById: {},\n  menuIdList: {\n    all: [],\n    veg: []\n  },\n  cartByIds: {}\n};\n\nfunction foodReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ACTIONS.CHANGE_DIET:\n      {\n        var diet = state.diet;\n        var newDiet = diet === 'veg' ? 'all' : 'veg';\n        return _objectSpread(_objectSpread({}, state), {}, {\n          diet: newDiet,\n          cartByIds: {}\n        });\n      }\n\n    case ACTIONS.LOAD_MENU:\n      {\n        var menu = action.payload.menu;\n        var menuById = {};\n        menu.forEach(function (item) {\n          menuById[item.id] = item;\n        });\n        var allMenuId = menu.map(function (item) {\n          return item.id;\n        });\n        var vegMenuId = menu.filter(function (item) {\n          return item.diet === 'veg';\n        }).map(function (item) {\n          return item.id;\n        });\n        return _objectSpread(_objectSpread({}, state), {}, {\n          menuById: menuById,\n          menuIdList: {\n            all: allMenuId,\n            veg: vegMenuId\n          }\n        });\n      }\n\n    case ACTIONS.ADD_TO_CART:\n      {\n        var itemId = action.payload.itemId;\n        var cartByIds = state.cartByIds;\n        var cartItem = cartByIds[itemId] || {\n          quantity: 0\n        };\n        cartItem.quantity += 1;\n\n        var newCart = _objectSpread(_objectSpread({}, cartByIds), {}, {\n          [itemId]: cartItem\n        });\n\n        return _objectSpread(_objectSpread({}, state), {}, {\n          cartByIds: newCart\n        });\n      }\n\n    case ACTIONS.REMOVE_FROM_CART:\n      {\n        var _itemId = action.payload.itemId;\n        var _cartByIds = state.cartByIds;\n        var _cartItem = _cartByIds[_itemId];\n\n        if (!_cartItem) {\n          return state;\n        }\n\n        _cartItem.quantity -= 1;\n\n        var _newCart = _objectSpread(_objectSpread({}, _cartByIds), {}, {\n          [_itemId]: _cartItem\n        });\n\n        return _objectSpread(_objectSpread({}, state), {}, {\n          cartByIds: _newCart\n        });\n      }\n\n    default:\n      return state;\n  }\n}\n\nvar enableReduxDevTools = (_window$__REDUX_DEVTO = (_window = window).__REDUX_DEVTOOLS_EXTENSION__) === null || _window$__REDUX_DEVTO === void 0 ? void 0 : _window$__REDUX_DEVTO.call(_window);\nexport function createReduxStore() {\n  var store = createStore(foodReducer, enableReduxDevTools);\n  return store;\n}","map":{"version":3,"sources":["/Users/selvakumar/Documents/personal.nosync/coding/react-query-app/src/redux.js"],"names":["createStore","ACTIONS","CHANGE_DIET","LOAD_MENU","ADD_TO_CART","REMOVE_FROM_CART","initialState","diet","menuById","menuIdList","all","veg","cartByIds","foodReducer","state","action","type","newDiet","menu","payload","forEach","item","id","allMenuId","map","vegMenuId","filter","itemId","cartItem","quantity","newCart","enableReduxDevTools","window","__REDUX_DEVTOOLS_EXTENSION__","createReduxStore","store"],"mappings":"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","sourcesContent":["import { createStore } from 'redux';\n\nexport const ACTIONS = {\n  CHANGE_DIET: 'CHANGE_DIET',\n  LOAD_MENU: 'LOAD_MENU',\n  ADD_TO_CART: 'ADD_TO_CART',\n  REMOVE_FROM_CART: 'REMOVE_FROM_CART',\n};\n\nconst initialState = {\n  diet: 'all',\n  menuById: {},\n  menuIdList: {\n    all: [],\n    veg: [],\n  },\n  cartByIds: {},\n};\n\nfunction foodReducer(state = initialState, action) {\n  switch (action.type) {\n    case ACTIONS.CHANGE_DIET: {\n      const { diet } = state;\n      const newDiet = diet === 'veg' ? 'all' : 'veg';\n\n      return {\n        ...state,\n        diet: newDiet,\n        cartByIds: {},\n      };\n    }\n    case ACTIONS.LOAD_MENU: {\n      const { menu } = action.payload;\n\n      const menuById = {};\n      menu.forEach((item) => {\n        menuById[item.id] = item;\n      });\n      const allMenuId = menu.map((item) => item.id);\n      const vegMenuId = menu.filter((item) => item.diet === 'veg').map((item) => item.id);\n\n      return {\n        ...state,\n        menuById,\n        menuIdList: {\n          all: allMenuId,\n          veg: vegMenuId,\n        },\n      };\n    }\n    case ACTIONS.ADD_TO_CART: {\n      const { itemId } = action.payload;\n      const { cartByIds } = state;\n\n      const cartItem = cartByIds[itemId] || {\n        quantity: 0,\n      };\n\n      cartItem.quantity += 1;\n\n      const newCart = {\n        ...cartByIds,\n        [itemId]: cartItem,\n      };\n\n      return {\n        ...state,\n        cartByIds: newCart,\n      };\n    }\n    case ACTIONS.REMOVE_FROM_CART: {\n      const { itemId } = action.payload;\n      const { cartByIds } = state;\n\n      const cartItem = cartByIds[itemId];\n\n      if (!cartItem) {\n        return state;\n      }\n\n      cartItem.quantity -= 1;\n\n      const newCart = {\n        ...cartByIds,\n        [itemId]: cartItem,\n      };\n\n      return {\n        ...state,\n        cartByIds: newCart,\n      };\n    }\n    default:\n      return state;\n  }\n}\n\nconst enableReduxDevTools = window.__REDUX_DEVTOOLS_EXTENSION__?.();\n\nexport function createReduxStore() {\n  const store = createStore(foodReducer, enableReduxDevTools);\n  return store;\n}"]},"metadata":{},"sourceType":"module"}