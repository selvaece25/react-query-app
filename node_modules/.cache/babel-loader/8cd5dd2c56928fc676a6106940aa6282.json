{"ast":null,"code":"import _regeneratorRuntime from \"/Users/selvakumar/Documents/personal.nosync/coding/react-query-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"/Users/selvakumar/Documents/personal.nosync/coding/react-query-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"/Users/selvakumar/Documents/personal.nosync/coding/react-query-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/selvakumar/Documents/personal.nosync/coding/react-query-app/src/modules/movies/listing.js\";\n\nimport React, { useEffect, lazy } from \"react\";\nimport { getMoviesList } from \"../../queries\";\nimport { useQuery } from \"react-query\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ACTIONS } from '../../redux';\nvar MovieList = lazy(function () {\n  return import(\"../../components/movie-card\");\n});\n\nvar MovieListingView = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var _React$useState, _React$useState2, skip, setSkip, _yield$useQuery, loading, error, data, authors, dispatch;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _React$useState = React.useState(false), _React$useState2 = _slicedToArray(_React$useState, 2), skip = _React$useState2[0], setSkip = _React$useState2[1];\n            _context.next = 3;\n            return useQuery(getMoviesList, {\n              skip: skip\n            });\n\n          case 3:\n            _yield$useQuery = _context.sent;\n            loading = _yield$useQuery.loading;\n            error = _yield$useQuery.error;\n            data = _yield$useQuery.data;\n            authors = useSelector(function (state) {\n              return state.authors;\n            });\n            dispatch = useDispatch();\n            console.log(\"---------loading------\");\n            console.log(loading);\n            console.log(data);\n            console.log(\"---------loading------\");\n            useEffect(function () {\n              // check whether data exists\n              console.log(\"---------loading------\");\n              console.log(loading);\n              console.log(data);\n              console.log(\"---------loading------\");\n\n              if (!loading && data && data.data) {\n                setSkip(true);\n                dispatch({\n                  type: ACTIONS.SET_ALL_AUTHORS,\n                  payload: {\n                    authors: data.data\n                  }\n                });\n              }\n            }, [skip]);\n\n            if (!error) {\n              _context.next = 16;\n              break;\n            }\n\n            return _context.abrupt(\"return\", /*#__PURE__*/React.createElement(\"div\", {\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 44,\n                columnNumber: 12\n              }\n            }, \"There was an Error \", error));\n\n          case 16:\n            if (data) {\n              _context.next = 18;\n              break;\n            }\n\n            return _context.abrupt(\"return\", /*#__PURE__*/React.createElement(\"div\", {\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 47,\n                columnNumber: 12\n              }\n            }, \"Loading....\"));\n\n          case 18:\n            console.log(\"---------authors------\");\n            console.log(authors);\n            console.log(\"---------authors------\");\n            return _context.abrupt(\"return\", /*#__PURE__*/React.createElement(\"div\", {\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 57,\n                columnNumber: 5\n              }\n            }, authors.map(function (userDetails) {\n              return /*#__PURE__*/React.createElement(MovieList, {\n                key: \"\".concat(userDetails.firstName, \"-\").concat(userDetails.lastName),\n                user: userDetails,\n                __self: _this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 59,\n                  columnNumber: 9\n                }\n              });\n            })));\n\n          case 22:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function MovieListingView() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nMovieListingView.displayName = \"MovieListingView\";\nexport default MovieListingView;","map":{"version":3,"sources":["/Users/selvakumar/Documents/personal.nosync/coding/react-query-app/src/modules/movies/listing.js"],"names":["React","useEffect","lazy","getMoviesList","useQuery","useSelector","useDispatch","ACTIONS","MovieList","MovieListingView","useState","skip","setSkip","loading","error","data","authors","state","dispatch","console","log","type","SET_ALL_AUTHORS","payload","map","userDetails","firstName","lastName","displayName"],"mappings":"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","sourcesContent":["import React, { useEffect, lazy } from \"react\";\nimport { getMoviesList } from \"../../queries\";\n\nimport { useQuery } from \"react-query\";\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { ACTIONS } from '../../redux';\n\n\nconst MovieList = lazy(() => import(\"../../components/movie-card\"));\n\nconst MovieListingView = async () => {\n  const [skip, setSkip] = React.useState(false)\n  const { loading, error, data} = await useQuery(getMoviesList, { skip });\n  const authors = useSelector((state) => state.authors);\n  const dispatch = useDispatch();\n\n  console.log(\"---------loading------\");\n  console.log(loading);\n  console.log(data);\n  console.log(\"---------loading------\");\n  \n\n  useEffect(() => {\n    // check whether data exists\n    \n  console.log(\"---------loading------\");\n  console.log(loading);\n  console.log(data);\n  console.log(\"---------loading------\");\n  \n    if (!loading && data && data.data) {\n      setSkip(true);\n      dispatch({\n        type: ACTIONS.SET_ALL_AUTHORS,\n        payload: {\n          authors: data.data\n        },\n      });\n    }\n  }, [skip])\n\n  if (error) {\n    return <div>There was an Error {error}</div>;\n  }\n  if (!data) {\n    return <div>Loading....</div>;\n  }\n \n\n  console.log(\"---------authors------\");\n  console.log(authors);\n  console.log(\"---------authors------\");\n  \n\n  return (\n    <div>\n      {authors.map((userDetails) => (\n        <MovieList key={`${userDetails.firstName}-${userDetails.lastName}`} user={userDetails} />\n      ))}\n    </div>\n  );\n};\n\nMovieListingView.displayName = \"MovieListingView\";\n\nexport default MovieListingView;\n"]},"metadata":{},"sourceType":"module"}